{% extends "network/layout.html" %}
{% load static %}

{% block body %}
    <h1>All Posts</h1>

    {% if user.is_authenticated %}
    <form>
        <input id="message" placeholder="say something" autofocus>
        <button>POST</button>
    </form>
    {% endif %}

    <div id="posts">

        {% for post in posts %}
        <div class="post text-left" data-post_id="{{post.id}}">
            <a href="{% url 'show_profile' post.creator.id %}"><h4>{{ post.creator }}</h4></a>

            <p>{{ post.message }}</p>
            <textarea style="display: none;"></textarea>
            <button style="display: none;" class="btn btn-sm btn-info mt-1">Update</button>

            {% if post.creator == user %}
                <a class="btn btn-sm btn-info edit" data-post_id="{{post.id}}">Edit</a>
            {% endif %}
            <br>
            <small class='text-secondary'>{{ post.timestamp }}</small>
            <br>
            {% if user.is_authenticated %}
                <button class="btn btn-sm btn-danger like">Like/Unlike</button>
            {% endif %}
            <span class="likes">Likes: {{post.likes }}</span> <br>
            <a href="#">Comment</a>
        </div>    
        {% endfor %}
        
    </div>
    
{% endblock %}


{% block js%}    
    {% if user.is_authenticated %}
        <script src="{% static 'network/main.js' %}"></script>
        <script src="{% static 'network/like_unlike.js' %}"></script>
    {% endif %}
{% endblock %}
    
