{% extends "network/layout.html" %}
{% load static %}

{% block body %}
    <h1>All Posts</h1>

    {% if user.is_authenticated %}
    <div style="margin: auto; display: inline-block;">

        <form  class="d-flex justify-content-around" style="width: 400px;">
            <textarea id="message" placeholder="say something" autofocus required
            class="form-control"></textarea>   
            
            <button class="btn btn-primary" id="post-button">POST</button>
        </form>
    </div>
    {% endif %}

    <div id="posts">

        {% for post in posts %}
        <div class="post text-left" data-post_id="{{post.id}}">

            <div class="post-header mb-2">
                
                <div class="post-header-left">

                    <img class="post-image" src="{{post.creator.image_url}}" >
                    <a href="{% url 'profile' post.creator.username 1 %}">
                        <h4>{{ post.creator }}</h4>
                    </a>
                </div>

                <small class='text-secondary'>{{ post.timestamp }}</small>
            </div>

            <p class="ml-2">{{ post.message }}</p>
            <textarea style="display: none;"></textarea>
            <button style="display: none;" class="btn btn-sm btn-info mt-1">Update</button>

           
            {% if user.is_authenticated %}

                {% if post.id in posts_liked %}
                    <i class="fa fa-heart like" style="color:red"></i>    
                {% else %}    
                    <i class="fa fa-heart like" style="color:black"></i>    
                {% endif %}

            {% else %}
                <i class="fa fa-heart like" style="color:black"></i>   
            {% endif %}
            <span class="likes">{{post.likes }}</span> <br>
           
        </div>    
        {% endfor %}
        
    </div>
    

    <nav id="nav-pagination">
        <ul class="pagination">

          <li class="page-item">
              <a class="page-link previous" href="/feed/1">Previous</a>
          </li>

          {% for i in range %}
             <li class="page-item page-number" data-page_number="{{i}}" >
                 <a class="page-link" href="/feed/{{i}}">{{i}}</a>
            </li>
          {% endfor%}

          <li class="page-item">
              <a class="page-link next" href="/feed/2">Next</a>
          </li>

        </ul>
      </nav>

{% endblock %}


{% block js%}    
    {% if user.is_authenticated %}
        <script src="{% static 'network/post.js' %}"></script>
        <script src="{% static 'network/like_unlike.js' %}"></script>
    {% endif %}
        
    <script src="{% static 'network/paginator.js' %}"></script>
{% endblock %}
    
