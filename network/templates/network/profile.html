{% extends "network/layout.html" %}
{% load static %}

{% block title%}{{username}}{% endblock %}

{% block body %}
    <div class="profile">

      <img src="{{profile_user.image_url}}" class="profile-image" >
      

      <h2 class="profile-username">{{ username }}</h2>
     
      <div class="profile-footer">
        
        <div class="profile-footer-left">
          <div class="profile-followers">
            <strong><span id="followers">{{followers}}</span></strong> <span class="text-secondary">Followers</span> 
          </div>
         <strong> {{following}} </strong> <span class="text-secondary ml-2"> Following </span>
        </div>

        <div class="profile-footer-righ">

          {% if user.is_authenticated %}
            {% if user.username != username %}
            <button id="follow_unfollow" 
            data-profile_id="{{user_id}}" 
            class="btn btn-sm btn-dark rounded-pill" style="width: 100px;">
            {% if is_followed %}
            Unfollow
            {% else %}
            Follow
            {% endif %}  
          </button>
          {% else %}
          <a href="{% url 'edit_profile' user.username %}" class="btn  btn-sm btn-primary rounded-pill" id="edit_profile" >Edit Profile</a>
          {% endif %}
        {% endif %}
      </div>
        
        
      </div>


      
      
    </div>

    

    <div id="posts">

      {% for post in posts %}
      <div class="post text-left" data-post_id="{{post.id}}">

        <div class="post-header mb-2">
                
          <div class="post-header-left">

              <img class="post-image" src="{{post.creator.image_url}}" >
              <a href="{% url 'profile' post.creator.username 1 %}">
                  <h4>{{ post.creator }}</h4>
              </a>
          </div>

          <small class='text-secondary'>{{ post.timestamp }}</small>
      </div>


          <p>{{ post.message }}</p>
          <textarea style="display: none;" class="edit-area form-control"></textarea>
          <button style="display: none;" class="btn btn-sm btn-info mt-1">Update</button>

          <div class="post-footer">

            <div class="likes-div" data-post_id="{{post.id}}"">
              
              {% if user.is_authenticated %}
              
              {% if post.id in posts_liked %}
              <i class="fa fa-heart like" style="color:red"></i>    
              {% else %}    
              <i class="fa fa-heart like" style="color:black"></i>    
              {% endif %}
              
              {% else %}
              <i class="fa fa-heart like" style="color:black"></i>   
              {% endif %}
              <span class="likes">{{post.likes }}</span>
            </div>
            
            <div class="edit-div">
              
              {% if post.creator == user %}
              <a class="btn btn-sm btn-info edit" data-post_id="{{post.id}}">Edit</a>
              {% endif %}
            </div>
          </div>
            
      </div>    
      {% endfor %}
      
    </div>
  
    <nav id="nav-pagination">
      <ul class="pagination">
        <li class="page-item">
            <a class="page-link previous" href="/profile/{{username}}/1">Previous</a>
      </li>
        {% for i in range %}
           <li class="page-item page-number" data-page_number="{{i}}" >
               <a class="page-link" href="/profile/{{username}}/{{i}}">{{i}}</a>
          </li>
        {% endfor%}
        <li class="page-item">
            <a class="page-link next" href="/profile/{{username}}/2">Next</a>
          </li>
      </ul>
    </nav> 
    
  {% endblock %}
    
{% block js %}
  {% if user.is_authenticated %}
    {% if user.username != username %}
      <script src="{% static 'network/follow_unfollow.js' %}"></script>
    {% else %}
      <script src="{% static 'network/edit.js' %}"></script>
      <script src="{% static 'network/edit_profile.js' %}"></script>
      {% endif %}
    <script src="{% static 'network/like_unlike.js' %}"></script>
  {% endif %}
    <script src="{% static 'network/paginator_profile.js' %}"></script>
{% endblock %}

    
