{% extends "network/layout.html" %}
{% load static %}

{% block body %}
    <h1>{{ username }}</h1>
    <ul>
      <li >Followers: <span id="followers">{{followers}}</span></li>
      <li>Following: {{following}}</li>
    </ul>

    {% if user.username != username %}
      <button id="follow_unfollow" 
         data-profile_id="{{user_id}}" 
         class="btn btn-sm btn-primary">
        {% if is_followed %}
          Unfollow
        {% else %}
          Follow
        {% endif %}  
      </button>
    {% endif %}

    <div id="posts">

      {% for post in posts %}
      <div class="post text-left" data-post_id="{{post.id}}">
          <a href="{% url 'show_profile' post.creator.id %}"><h4>{{ post.creator }}</h4></a>

          <p>{{ post.message }}</p>
          <textarea style="display: none;"></textarea>
          <button style="display: none;" class="btn btn-sm btn-info mt-1">Update</button>

          {% if post.creator == user %}
              <a class="btn btn-sm btn-info edit" data-post_id="{{post.id}}">Edit</a>
          {% endif %}
          <br>
          <small class='text-secondary'>{{ post.timestamp }}</small>
          <br>
          {% if user.is_authenticated %}
            <button class="btn btn-sm btn-danger like">Like/Unlike</button>
          {% endif %}
          <span class="likes">Likes: {{post.likes }}</span> <br>
          <a href="#">Comment</a>
      </div>    
      {% endfor %}
      
  </div>
  
    
    
    {% endblock %}
    
{% block js %}
    {% if user.username != username %}
      <script src="{% static 'network/follow_unfollow.js' %}"></script>
    {% else %}
      <script src="{% static 'network/edit.js' %}"></script>
      {% endif %}
    <script src="{% static 'network/like_unlike.js' %}"></script>
{% endblock %}

    
